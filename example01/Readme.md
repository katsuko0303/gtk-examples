# Example01

簡単なアプリケーションのサンプルです。

## アプリケーションの起動

GTK4では、昔からあった`gtk_main`というメインループメソッドがなくなり、`GtkApplication`というアプリケーションクラスを使用しなければなりません。
`GtkApplicaton`クラスのインスタンスを作るか、`GtkApplication`クラスを継承した継承クラスを作ってそのインスタンスを作るか、どちらでも構いません。
大きなアプリケーションになれば、継承クラスを作った方がいいでしょう。

アプリケーションが起動すると、`activate`シグナルが発生します。
アプリケーションは、`activate`シグナルを処理するか、`GtkApplication`クラスを継承したクラスを作ったのであれば`activate`メソッドをオーバーライドして処理します。

`GtkApplication`の`application-id`プロパティを指定すると、ウィンドウが一つのプロセスで管理されます。
(例では継承してコンストラクタで指定していますが、`gtk_application_new`関数の引数でも指定できます。)
例えば、既にプログラムが起動された状態で別にプログラムを起動した場合、`application-id`プロパティを設定しない(`NULL`に設定する)と、それぞれのプロセスでアプリケーションクラスのインスタンスが作成され、それぞれのインスタンスの`activate`シグナルが発生します。
それに対して、`application-id`プロパティが指定されている場合には、既に起動されているプロセスがあればそちらに`activate`シグナルが発生し、後で起動されたプロセスは即時に終了します。
複数のウィンドウ管理をする際には、`application-id`プロパティを指定するほうが望ましいでしょう。

## アプリケーションとウィンドウ

ウィンドウを作る際に、`GtkWindow`クラスの`application`プロパティにアプリケーションのインスタンスを指定します。
これにより、指定されたウィンドウが破棄されない間はアプリケーションが動き続きます。

なお、アプリケーション内のウィンドウは、`GtkApplication`クラスの`get_windows`メソッドで全て取得できます。

## GtkApplicationWindowとGtkWindow

GTKのサンプルはよく`GtkWindow`クラスが使われますが、本サンプルでは`GtkApplicationWindow`を使用しました。

`GtkApplicationWindow`クラスは、`GtkWindow`クラスを継承し、加えてアクションの機能を実装したクラスです。
具体的に言うと、Gioの`GActionGroup`/`GActionMap`インターフェイスを継承しています。


