# ファイル選択ダイアログサンプル

GTK4.10では、ファイルを選択するダイアログである`GtkFileChooserDialog`がdeprecatedになり、代わりに`GtkFileDialog`が追加されました。
ファイルの選択ダイアログというのは、それなりに使用頻度が高いと思いますので、説明したいと思います。

とはいえ、それほど複雑ではありません。

1. `GtkFileDialog`のインスタンスを作成する。
2. 目的に応じたメソッドを読んで表示する。
3. コールバックでfinishメソッドを呼んで、結果を受け取る。

という手順になります。

「目的に応じたメソッド」は、以下のようなものがあります。

|メソッド                 |用途                  |
|:------------------------|:---------------------|
|`open`                   |ファイルを読み込む    |
|`open_multiple`          |複数ファイルを読み込む|
|`save`                   |ファイルを書き込む    |
|`select_folder`          |フォルダを選択する    |
|`select_multiple_folders`|複数フォルダを選択する|

どのメソッドも、引数はダイアログの親ウィンドウ、キャンセラブルオブジェクト、コールバックとそのコールバックが呼ばれた際に一緒に渡すデータを指定します。
(Pythonの場合、一緒に渡すデータは可変長引数になります)

キャンセラブルオブジェクトは、`GCancellable`(Pythonの場合は`Gio.Cancellable`)クラスのオブジェクトです。
`cancel`メソッドを呼ぶことによって、外部からキャンセルを実行することができます。
必要がなければ、`NULL`を指定しておきます。

ファイル・フォルダが選択されたり、キャンセルすると、メソッドで指定したコールバックが呼ばれます。
そのコールバックの中で、当初のメソッドに「`_finish`」というサフィックスがついたメソッドを呼び出して、結果を受け取ります。
Pythonの場合、finishメソッドを呼び出すると`GLib.Error`例外がraiseされることがあるので、しっかりと例外を処理する必要があります。

